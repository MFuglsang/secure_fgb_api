{"version":3,"sources":["../../../../src/ts/generic.ts"],"sourcesContent":["import type { IFeature } from './generic/feature.js';\nimport {\n    deserialize as deserializeArray,\n    deserializeFiltered,\n    deserializeStream,\n    type FromFeatureFn,\n} from './generic/featurecollection.js';\nimport type { HeaderMeta } from './header-meta.js';\nimport type { Rect } from './packedrtree.js';\n\nexport { ColumnType } from './flat-geobuf/column-type.js';\nexport { GeometryType } from './flat-geobuf/geometry-type.js';\n\n/** Callback function for receiving header metadata */\nexport type HeaderMetaFn = (headerMeta: HeaderMeta) => void;\n\n/**\n * Deserialize FlatGeobuf from a URL into generic features\n * @param url Input string\n * @param fromFeature Callback that receives generic features\n * @param rect Filter rectangle\n */\nexport function deserialize(url: string, fromFeature: FromFeatureFn, rect?: Rect): AsyncGenerator<IFeature>;\n\n/**\n * Deserialize FlatGeobuf from a typed array into generic features\n * @param typedArray Input byte array\n * @param fromFeature Callback that receives generic features\n */\nexport function deserialize(typedArray: Uint8Array, fromFeature: FromFeatureFn, rect?: Rect): IFeature[];\n\n/**\n * Deserialize FlatGeobuf from a stream into generic features\n * NOTE: Does not support spatial filtering\n * @param input stream\n * @param fromFeature Callback that receives generic features\n */\nexport function deserialize(input: ReadableStream, fromFeature: FromFeatureFn): AsyncGenerator<IFeature>;\n\n/** Implementation */\nexport function deserialize(\n    input: Uint8Array | ReadableStream | string,\n    fromFeature: FromFeatureFn,\n    rect?: Rect,\n    nocache = false,\n    headers: HeadersInit = {},\n): IFeature[] | AsyncGenerator<IFeature> {\n    if (input instanceof Uint8Array) return deserializeArray(input, fromFeature, rect);\n    if (input instanceof ReadableStream) return deserializeStream(input, fromFeature);\n    return deserializeFiltered(input, rect as Rect, fromFeature, undefined, nocache, headers);\n}\n\nexport { parseProperties } from './generic/feature.js';\nexport { serialize } from './generic/featurecollection.js';\n"],"names":["deserialize","deserializeArray","deserializeFiltered","deserializeStream","ColumnType","GeometryType","input","fromFeature","rect","nocache","headers","Uint8Array","ReadableStream","undefined","parseProperties","serialize"],"mappings":"AACA,OACIA,eAAeC,CAAgB,CAC/BC,uBAAAA,CAAmB,CACnBC,qBAAAA,CAAiB,KAEd,gCAAiC,AAIxC,QAASC,UAAU,KAAQ,8BAA+B,AAC1D,QAASC,YAAY,KAAQ,gCAAiC,AA6B9D,QAAO,SAASL,YACZM,CAA2C,CAC3CC,CAA0B,CAC1BC,CAAW,CACXC,EAAU,CAAA,CAAK,CACfC,EAAuB,CAAC,CAAC,SAEzB,AAAIJ,aAAiBK,WAAmBV,EAAiBK,EAAOC,EAAaC,GACzEF,aAAiBM,eAAuBT,EAAkBG,EAAOC,GAC9DL,EAAoBI,EAAOE,EAAcD,EAAaM,KAAAA,EAAWJ,EAASC,EACrF,CAEA,OAASI,eAAe,KAAQ,sBAAuB,AACvD,QAASC,SAAS,KAAQ,gCAAiC"}