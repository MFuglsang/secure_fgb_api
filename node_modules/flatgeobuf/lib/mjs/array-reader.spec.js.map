{"version":3,"sources":["../../../../src/ts/array-reader.spec.ts"],"sourcesContent":["import { readFileSync } from 'node:fs';\nimport path from 'node:path';\nimport { describe, expect, it } from 'vitest';\nimport { ArrayReader } from './array-reader.js';\nimport { fromFeature, type IGeoJsonFeature } from './geojson/feature.js';\nimport type { Rect } from './packedrtree.js';\n\ndescribe('ArrayReader', () => {\n    it('Should filter features using ArrayReader', async () => {\n        const bytes = new Uint8Array(readFileSync(path.join(__dirname, '../../test/data/UScounties.fgb')));\n\n        const rect: Rect = {\n            minX: -106.88,\n            minY: 36.75,\n            maxX: -101.11,\n            maxY: 41.24,\n        };\n\n        const reader = ArrayReader.open(bytes);\n\n        const features: IGeoJsonFeature[] = [];\n        for await (const feature of reader.selectBbox(rect)) {\n            features.push(fromFeature(feature.id, feature.feature, reader.header));\n        }\n\n        expect(features.length).toBe(86);\n        const actual = features.slice(0, 4).map((f) => `${f.properties?.NAME}, ${f.properties?.STATE}`);\n        const expected = ['Texas, OK', 'Cimarron, OK', 'Taos, NM', 'Colfax, NM'];\n        expect(actual).toEqual(expected);\n    });\n});\n"],"names":["readFileSync","path","describe","expect","it","ArrayReader","fromFeature","bytes","Uint8Array","join","__dirname","reader","open","features","feature","selectBbox","minX","minY","maxX","maxY","push","id","header","length","toBe","slice","map","f","properties","NAME","STATE","toEqual"],"mappings":"AAAA,OAASA,gBAAAA,CAAY,KAAQ,SAAU,AACvC,QAAOC,MAAU,WAAY,AAC7B,QAASC,YAAAA,CAAQ,CAAEC,UAAAA,CAAM,CAAEC,MAAAA,CAAE,KAAQ,QAAS,AAC9C,QAASC,eAAAA,CAAW,KAAQ,mBAAoB,AAChD,QAASC,eAAAA,CAAW,KAA8B,sBAAuB,CAGzEJ,EAAS,cAAe,KACpBE,EAAG,2CAA4C,UAC3C,IAAMG,EAAQ,IAAIC,WAAWR,EAAaC,EAAKQ,IAAI,CAACC,UAAW,oCASzDC,EAASN,EAAYO,IAAI,CAACL,GAE1BM,EAA8B,EAAE,CACtC,UAAW,IAAMC,KAAWH,EAAOI,UAAU,CAV1B,CACfC,KAAM,QACNC,KAAM,MACNC,KAAM,QACNC,KAAM,KACV,GAMIN,EAASO,IAAI,CAACd,EAAYQ,EAAQO,EAAE,CAAEP,EAAQA,OAAO,CAAEH,EAAOW,MAAM,GAGxEnB,EAAOU,EAASU,MAAM,EAAEC,IAAI,CAAC,IAG7BrB,EAFeU,EAASY,KAAK,CAAC,EAAG,GAAGC,GAAG,CAAC,AAACC,GAAM,CAAC,EAAEA,EAAEC,UAAU,EAAEC,KAAK,EAAE,EAAEF,EAAEC,UAAU,EAAEE,MAAM,CAAC,GAE/EC,OAAO,CADL,CAAC,YAAa,eAAgB,WAAY,aAAa,CAE5E,EACJ"}