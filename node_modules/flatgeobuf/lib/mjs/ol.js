import{all as e}from"ol/loadingstrategy.js";import{FeatureCollection as t}from"./ol/featurecollection.js";export function serialize(e,t){return e.serialize(t)}export function deserialize(e,t,r){return t instanceof Uint8Array?e.deserialize(t):t instanceof ReadableStream?e.deserializeStream(t):e.deserializeFiltered(t,r)}async function r(t,r,i,a){if(i===e){let e=a.getHeaders();return deserialize(a,(await fetch(t,{headers:e})).body)}let o=a.getRect(r);return deserialize(a,t,o)}export function createLoader(t,i,a,o=e,n=!1){return async(e,l,s,c,u)=>{try{n&&i.clear();let l=await r(a,e,o,t),s=[];for await(let e of l)s.push(e),i.addFeature(e);c?.(s)}catch(e){u?.()}}}export const tileUrlFunction=e=>JSON.stringify(e);export function createTileLoadFunction(e,t){return r=>{let i=async i=>{let a=e.getRect(i),o=deserialize(e,t,a),n=[];for await(let e of o)n.push(e);r.setFeatures(n)};r.setLoader(i)}}export{t as FeatureCollection};
//# sourceMappingURL=ol.js.map